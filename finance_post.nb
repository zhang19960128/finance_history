(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     11547,        278]
NotebookOptionsPosition[     10647,        246]
NotebookOutlinePosition[     11005,        262]
CellTagsIndexPosition[     10962,        259]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"get", "[", "stock_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "url1", ",", "url", ",", "stock1", ",", "datastr", ",", "datalist"}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"url1", "=", "\"\<http://hq.sinajs.cn/list=sz\>\""}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"stock1", "=", 
       RowBox[{"ToString", "[", "stock", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"url", "=", 
       RowBox[{"url1", "<>", "stock1"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"datastr", "=", 
       RowBox[{"URLFetch", "[", "url", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"datalist", "=", 
       RowBox[{"StringSplit", "[", 
        RowBox[{"datastr", ",", "\"\<,\>\""}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"stockname", "=", 
       RowBox[{"StringSplit", "[", 
        RowBox[{
         RowBox[{"datalist", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "\"\<=\>\""}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Return", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"stockname", "[", 
          RowBox[{"[", "2", "]"}], "]"}], ",", 
         RowBox[{"datalist", "[", 
          RowBox[{"[", "4", "]"}], "]"}], ",", 
         RowBox[{"datalist", "[", 
          RowBox[{"[", "32", "]"}], "]"}]}], "}"}], "]"}]}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"stock", "=", "\"\<000961\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"get", "[", "stock", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"price", "=", "7.45"}], ";"}], 
  RowBox[{"(*", 
   RowBox[{
   "\:4f4e\:4e8e\:8fd9\:4e2a\:4ef7\:683c", "\:ff0c", 
    "\:4e70\:8fdb\:6216\:8005\:662f\:5356\:51fa"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"While", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"ToExpression", "[", 
      RowBox[{
       RowBox[{"get", "[", "stock", "]"}], "[", 
       RowBox[{"[", "2", "]"}], "]"}], "]"}], "<", "price"}], ",", 
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "0"}], ",", 
      RowBox[{"i", "<", "300000"}], ",", 
      RowBox[{"i", "++"}]}], "]"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"While", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"ToExpression", "[", 
      RowBox[{
       RowBox[{"get", "[", "stock", "]"}], "[", 
       RowBox[{"[", "2", "]"}], "]"}], "]"}], "<", "price"}], ",", 
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "0"}], ",", 
      RowBox[{"i", "<", "300000"}], ",", 
      RowBox[{"i", "++"}]}], "]"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"While", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"ToExpression", "[", 
      RowBox[{
       RowBox[{"get", "[", "stock", "]"}], "[", 
       RowBox[{"[", "2", "]"}], "]"}], "]"}], "<", "price"}], ",", 
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "0"}], ",", 
      RowBox[{"i", "<", "300000"}], ",", 
      RowBox[{"i", "++"}]}], "]"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"SendMail", "[", 
  RowBox[{
   RowBox[{"\"\<To\>\"", "\[Rule]", "\"\<your email\>\""}], " ", ",", 
   RowBox[{"\"\<Subject\>\"", "\[Rule]", 
    RowBox[{"get", "[", "stock", "]"}]}], ",", 
   RowBox[{"\"\<Body\>\"", "\[Rule]", 
    RowBox[{
     RowBox[{"get", "[", "stock", "]"}], "[", 
     RowBox[{"[", "2", "]"}], "]"}]}], ",", 
   RowBox[{"\"\<Password\>\"", "\[Rule]", "\"\<your pass word\>\""}]}], 
  "]"}]}], "Input",
 CellChangeTimes->{{3.699590989519928*^9, 3.6995910283140287`*^9}, {
   3.6995911081207447`*^9, 3.6995911569291334`*^9}, {3.6995917526223507`*^9, 
   3.6995917643737373`*^9}, {3.6995918486894083`*^9, 
   3.6995918572195187`*^9}, {3.6995920644346824`*^9, 
   3.6995920821885166`*^9}, {3.6995921451360054`*^9, 
   3.6995921645781984`*^9}, {3.6995922247223873`*^9, 3.699592243932395*^9}, {
   3.6995922963585815`*^9, 3.6995924517422953`*^9}, {3.6995926593105674`*^9, 
   3.69959268600844*^9}, {3.6995927325895243`*^9, 3.6995927416887093`*^9}, {
   3.699592825327551*^9, 3.699592828652051*^9}, {3.6995929113177366`*^9, 
   3.6995929274527216`*^9}, {3.6995929692114277`*^9, 3.699592979110594*^9}, {
   3.6995930770268974`*^9, 3.699593089497439*^9}, {3.6995931867943554`*^9, 
   3.699593245838159*^9}, {3.699593313761643*^9, 3.6995933170074463`*^9}, {
   3.6995933910727615`*^9, 3.699593416690915*^9}, {3.6995934651026454`*^9, 
   3.6995934959013114`*^9}, {3.699593770985956*^9, 3.6995937710144777`*^9}, {
   3.6996096420879183`*^9, 3.699609645744986*^9}, {3.6996097761035123`*^9, 
   3.6996097770566483`*^9}, {3.699610210062627*^9, 3.6996102147165875`*^9}, 
   3.6996550529666243`*^9, {3.6996552536644793`*^9, 3.69965527095247*^9}, {
   3.6996553085042315`*^9, 3.6996553845143585`*^9}, {3.6996561125991273`*^9, 
   3.699656142857892*^9}, {3.6996561794682455`*^9, 3.6996562124894457`*^9}, {
   3.699656265538068*^9, 3.6996562811175227`*^9}, {3.6996563154488125`*^9, 
   3.6996563735435286`*^9}, {3.699656414016638*^9, 3.6996564339331417`*^9}, {
   3.699658555222518*^9, 3.699658657390482*^9}, {3.6996587829137917`*^9, 
   3.699658855340192*^9}, {3.699659064863867*^9, 3.6996591393086953`*^9}, 
   3.699659252354369*^9, {3.699659291956641*^9, 3.6996592962997017`*^9}, {
   3.699659438517271*^9, 3.6996594435926743`*^9}, {3.699783579828579*^9, 
   3.699783707675329*^9}, {3.6997837695660176`*^9, 3.6997837698668766`*^9}, {
   3.699783816722115*^9, 3.699783911191083*^9}, {3.6997839486242957`*^9, 
   3.6997839501579995`*^9}, {3.6997840898502607`*^9, 
   3.6997840921906595`*^9}, {3.699822582564169*^9, 3.699822671689146*^9}, {
   3.6998237885096493`*^9, 3.699823843779869*^9}, {3.699823941444389*^9, 
   3.699824081700248*^9}, {3.699831607634321*^9, 3.699831622389845*^9}, {
   3.6998317689349856`*^9, 3.6998317699208417`*^9}, {3.699831815442956*^9, 
   3.6998318186213446`*^9}, {3.6998318486606903`*^9, 3.699831848945896*^9}, {
   3.6998405553022394`*^9, 3.6998405697470675`*^9}, {3.6999255645755577`*^9, 
   3.6999256366991496`*^9}, {3.6999257685519695`*^9, 
   3.6999257809984035`*^9}, {3.69993047763376*^9, 3.6999304835911837`*^9}, {
   3.6999305844531083`*^9, 3.6999305853571253`*^9}, {3.7039264544497814`*^9, 
   3.7039264663894734`*^9}}],

Cell[BoxData["$Aborted"], "Output",
 CellChangeTimes->{
  3.699823778935911*^9, 3.699823817147369*^9, 3.6998239575515165`*^9, 
   3.699824047222206*^9, 3.6998241014015427`*^9, 3.6998317580047584`*^9, 
   3.699831804961489*^9, 3.699831839461241*^9, 3.699831926550933*^9, 
   3.6998322448736267`*^9, 3.69984487316306*^9, 3.6999256181770945`*^9, 
   3.6999256779404655`*^9, 3.6999257739322224`*^9, {3.699930490549796*^9, 
   3.6999305173689613`*^9}, 3.6999483268677826`*^9}],

Cell[BoxData["$Aborted"], "Output",
 CellChangeTimes->{
  3.699823778935911*^9, 3.699823817147369*^9, 3.6998239575515165`*^9, 
   3.699824047222206*^9, 3.6998241014015427`*^9, 3.6998317580047584`*^9, 
   3.699831804961489*^9, 3.699831839461241*^9, 3.699831926550933*^9, 
   3.6998322448736267`*^9, 3.69984487316306*^9, 3.6999256181770945`*^9, 
   3.6999256779404655`*^9, 3.6999257739322224`*^9, {3.699930490549796*^9, 
   3.6999305173689613`*^9}, 3.699948328530532*^9}],

Cell[BoxData["$Aborted"], "Output",
 CellChangeTimes->{
  3.699823778935911*^9, 3.699823817147369*^9, 3.6998239575515165`*^9, 
   3.699824047222206*^9, 3.6998241014015427`*^9, 3.6998317580047584`*^9, 
   3.699831804961489*^9, 3.699831839461241*^9, 3.699831926550933*^9, 
   3.6998322448736267`*^9, 3.69984487316306*^9, 3.6999256181770945`*^9, 
   3.6999256779404655`*^9, 3.6999257739322224`*^9, {3.699930490549796*^9, 
   3.6999305173689613`*^9}, 3.699948330156678*^9}],

Cell[BoxData["$Aborted"], "Output",
 CellChangeTimes->{
  3.699823778935911*^9, 3.699823817147369*^9, 3.6998239575515165`*^9, 
   3.699824047222206*^9, 3.6998241014015427`*^9, 3.6998317580047584`*^9, 
   3.699831804961489*^9, 3.699831839461241*^9, 3.699831926550933*^9, 
   3.6998322448736267`*^9, 3.69984487316306*^9, 3.6999256181770945`*^9, 
   3.6999256779404655`*^9, 3.6999257739322224`*^9, {3.699930490549796*^9, 
   3.6999305173689613`*^9}, 3.699948332330383*^9}]
}, Open  ]],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.699784083382307*^9, 3.699784083420085*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.699783566560207*^9, 3.699783566592491*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.6997559081525393`*^9, 3.6997559201931567`*^9}, 
   3.6997835621680236`*^9, {3.699783721626771*^9, 3.699783751633966*^9}, 
   3.69978392521368*^9}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.699823746272396*^9, 3.699823746272396*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.699754632953144*^9, 3.6997546405133634`*^9}, {
  3.6997548029647284`*^9, 3.6997548919295225`*^9}, {3.6997549907109566`*^9, 
  3.6997550190060606`*^9}, {3.6997555345616183`*^9, 3.6997555488331633`*^9}, {
  3.699755582814471*^9, 3.699755594296445*^9}, {3.6997557466767197`*^9, 
  3.699755757339896*^9}, {3.699755805707066*^9, 3.699755817702854*^9}, {
  3.6997559274457083`*^9, 3.69975594024921*^9}, {3.69978349387834*^9, 
  3.699783501484009*^9}, {3.699783544274269*^9, 3.6997835779105096`*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.69982374526274*^9, 3.69982374526274*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.69965623196647*^9, 3.6996562375244865`*^9}, 
   3.699656379278911*^9, 3.6997840327457423`*^9, 3.6998237437437506`*^9}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.699823742583271*^9, 3.699823742583271*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.6996101958228087`*^9, 3.699610198664983*^9}, {
  3.6996561346680408`*^9, 3.699656138802308*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{3.6997537198150787`*^9, 3.6997537980376015`*^9}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.699773944267495*^9, 3.699773944283075*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.6997543254038844`*^9, 3.6997543254038844`*^9}, 
   3.699773943013936*^9}]
},
WindowSize->{759, 625},
WindowMargins->{{189, Automatic}, {-62, Automatic}},
FrontEndVersion->"11.0 for Microsoft Windows (64-bit) (2016\:5e7410\:67088\
\:65e5)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 6310, 138, 496, "Input"],
Cell[6893, 162, 471, 7, 30, "Output"],
Cell[7367, 171, 469, 7, 30, "Output"],
Cell[7839, 180, 469, 7, 30, "Output"],
Cell[8311, 189, 469, 7, 30, "Output"]
}, Open  ]],
Cell[8795, 199, 92, 1, 30, "Input"],
Cell[8890, 202, 92, 1, 30, "Input"],
Cell[8985, 205, 195, 3, 30, "Input"],
Cell[9183, 210, 92, 1, 30, "Input"],
Cell[9278, 213, 542, 7, 30, "Input"],
Cell[9823, 222, 90, 1, 30, "Input"],
Cell[9916, 225, 167, 2, 30, "Input"],
Cell[10086, 229, 92, 1, 30, "Input"],
Cell[10181, 232, 145, 2, 30, "Input"],
Cell[10329, 236, 94, 1, 30, "Input"],
Cell[10426, 239, 92, 1, 30, "Input"],
Cell[10521, 242, 122, 2, 30, "Input"]
}
]
*)

